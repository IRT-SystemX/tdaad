name: Pull request checks

on:
  push:
    branches:
      - main
      - develop

  pull_request:
    types:
      - opened
      - synchronize
      - reopened

jobs:

  python-quality-check: # Install dependencies and run tests with pytest
     name: Python tests
     runs-on: ubuntu-latest

     strategy:
       matrix:
         python-version: ["3.12","3.13"]

     steps:
       - uses: actions/checkout@v3
       - name: Set up Python ${{ matrix.python-version }}
         uses: actions/setup-python@v4
         with:
           python-version: ${{ matrix.python-version }}
       - name: Install dependencies
         run: |
           python -m pip install --upgrade pip
           pip install .
           pip install -r scripts/quality_requirements.txt
       - name: Launch quality check and tests
         run: |
            cd scripts 
            chmod +x run_quality_check.sh
            ./run_quality_check.sh
            cd ..

#  docker-build-check: # Build the docker image and check that it can run
#    name: Docker build check
#    needs:
#      [black-format-check, prettier-check, cspell-check, version-upgrade-check]
#    runs-on: ubuntu-latest
#    if: contains(github.ref, "develop")
#    steps:
#      - uses: actions/checkout@v2
#      - name: Set up Docker Buildx
#        uses: docker/setup-buildx-action@v1
#      - name: Build the Docker image
#        run: |
#          docker build -t neuralde .
#      - name: Run the Docker image
#        run: |
#          docker run --rm neuralde python main.py
